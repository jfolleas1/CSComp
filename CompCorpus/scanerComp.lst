
// ==========================================================================
//  GPLEX error listing for lex source file <scanerComp.lex>
// ==========================================================================
//  Version:  1.2.2
//  Machine:  FIDF3675368
//  DateTime: 12/06/2017 10:23:14
//  UserName: j.folleas
// ==========================================================================


// appel des using avec le % pour les bout de code driect en C#

%using QUT.Gppg;

%namespace Analyser

%option stack, minimize, parser, verbose, persistbuffer, unicode, compressNext, embedbuffers

%{
    
    /*

    Ce code va Ãªtre copier dans le ficher d'output
	*/
	public static int currentLine = 1; 

	public override void yyerror(string format, params object[] args) // remember to add override back
	{
		System.Console.Error.WriteLine("Error: line {0} - column {1} " + format, yyline, yycol);
	}

%}

// Liste des regex



Identifier [A-Za-z][A-Za-z0-9_]*
Integer [0-9]+
Float [0-9]+,[0-9]+
CharString \"(\\.|[^\\"])*\"

DeadWord	[^ \t\n${}()+-/*(&&)(||)!(==)(<=)(<)(>=)(>)(:=);]+

%%

[ \r\t]			{ /*ignore*/ }
"\n"			{ currentLine++; Console.WriteLine(currentLine); yylloc = new LexLocation(tokLin+1,tokCol+1,tokELin,tokECol; }
// Error: Missing matching construct <')'> 
// Error: Parser error <Syntax error, unexpected }> 
// -------------------------------------------------
//
// Start of Rules
//

%{ //user-code that will be executed before getting the next token
%}

"$Titre"				{return (int)Tokens.TITREACTEKW;}
"$true"                 {return (int)Tokens.TRUE; }
"$false"                {return (int)Tokens.FALSE;}
"$dollar"				{return (int)Tokens.DOLLAR;}

"+"                     {return (int)Tokens.PLUS;}
"-"                     {return (int)Tokens.MINUS;}
"/"                     {return (int)Tokens.DIV;}
"*"                     {return (int)Tokens.MUL;}

"("						{return (int)Tokens.PARENTOPEN;}
")"						{return (int)Tokens.PARENTCLOSE;}
"{"						{return (int)Tokens.BRACEOPEN;}
"}"						{return (int)Tokens.BRACECLOSE;}

"&&"                    {return (int)Tokens.AND;}
"||"                    {return (int)Tokens.OR;}
"!"                     {return (int)Tokens.NOT;}
"=="                    {return (int)Tokens.EGALE;}
"<"                     {return (int)Tokens.INF;}
"<="                    {return (int)Tokens.INFEGALE;}
">"                     {return (int)Tokens.SUP;}
">="                    {return (int)Tokens.SUPEGALE;}

":="					{return (int)Tokens.ASSIGN;}

";"						{return (int)Tokens.SEMICOLON; }



{Integer}              { Int64.TryParse (yytext, NumberStyles.Integer, CultureInfo.CurrentCulture, out yylval.Integer);  return (int)Tokens.INTEGER;}
{Float}                {double.TryParse (yytext, NumberStyles.Float, CultureInfo.CurrentCulture, out yylval.Float); return (int)Tokens.FLOAT;}
{CharString}           {yylval.String = yytext; return (int)Tokens.STRING;}
{Identifier}           {yylval.String = yytext; return (int)Tokens.ID;}

{DeadWord}				{yylval.String = yytext; return (int)Tokens.DEADWORD;}


%% //User-code Section// ==========================================================================

